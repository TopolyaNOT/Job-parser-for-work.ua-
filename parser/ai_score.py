import openai


def get_score(description: str) -> int | None:
    if not description or not isinstance(description, str) or len(description) < 50:
        return None
    try:
        prompt = f"""
    Ти — найманий аналітик ринку праціз великим досвідом роботи, який оцінює вакансії для молодого працівника за допомогою його резюмме. Твоя мета — знайти для працівника найкращу ваканцію і об’єктивну оцінку за 10-бальною шкалою.

    Ось моє резюме:

    Початківeць у сфері IT з фокусом на автоматизації цифрових процесів та аналізі даних. Маю практичний досвід створення скриптів на Python для збору та обробки даних, вміння працювати з Excel та Power BI. Шукаю можливість застосувати знання в реальних проєктах та розвиватися як спеціаліст з аналітики та автоматизації.

    Технічні навички

        Мови програмування: Python

        Інструменти та технології: Excel, Power BI

        Додатково: робота з API, веб-скрапінг, обробка даних

    Проєкти
    Парсер вакансій Work.ua

        Розробив скрипт на Python для збору даних про вакансії (посада, мінімальна/максимальна зарплата, компанія, галузь, вимоги, бажані навички, верифікація компанії, адреса, оцінка вакансії за допомогою ШІ).

        Автоматизація збору та структурування інформації для подальшого аналізу.

    Майбутній проєкт: Парсер резюме для Work.ua (HR-аналітика)

        Планую створити інструмент для аналізу резюме та автоматичного визначення ключових навичок і релевантності кандидатів.

    Освіта
    Закінчена: фаховий молодший бакалав з спеціальності Підприємництво, тогрівля да біржова діяльність
    Поточна: Студент 1 курсу, 2025 – 2029 Торговельно екномномічного університету, спеціальність Системний аналіз та наука про дані

    М’які навички
    Аналітичне мислення, вирішення проблем, швидке навчання, командна робота, самостійність, чесність.
        ---
        {description}
        ---

        Твоя відповідь повинна бути ТІЛЬКИ ОДНИМ ЦІЛИМ ЧИСЛОМ від 0 до 10, без жодних пояснень чи додаткового тексту.
         """
        
        response = openai.chat.completions.create(
            model="gpt-3.5-turbo",  # Ця модель швидка і дешева, ідеально для таких завдань
            messages=[
                {"role": "system", "content": "Ти — корисний асистент, що повертає тільки числа."},
                {"role": "user", "content": prompt}
            ],
            temperature=0, # Нам потрібна стабільна, а не креативна відповідь
            max_tokens=10
        )
        score_text = response.choices[0].message.content.strip()
        return int(score_text)
    except Exception as e:
        print(f"Помилка при запиті до OpenAI: {e}")
        return None